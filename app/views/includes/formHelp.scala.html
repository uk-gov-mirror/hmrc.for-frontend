@*
 * Copyright 2022 HM Revenue & Customs
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *@

@import uk.gov.hmrc.play.partials.FormPartialRetriever
@import uk.gov.hmrc.play.bootstrap.config.ServicesConfig
@import scala.concurrent.ExecutionContext

@this(partialRetriever: FormPartialRetriever, servicesConfig: ServicesConfig)

@()(implicit request: Request[_], messages: Messages, ec: ExecutionContext)

@hmrcHelpWithPageFormUrl = @{
    val contactFrontendPartialBaseUrl = servicesConfig.baseUrl("contact-frontend")
    val serviceIdentifier = "RALD"
    s"$contactFrontendPartialBaseUrl/contact/problem_reports_ajax?service=$serviceIdentifier"
}

    <details class="govuk-details" data-module="govuk-details">
        <summary class="govuk-details__summary">
            <span class="govuk-details__summary-text">
                @messages("label.help.link")
            </span>
        </summary>
        <div id="helpForm" class="govuk-body help__wrapper"
        style="position:relative; min-height:300px; ">
            <svg class="spinner" viewBox="0 0 50 50" style="display: none;">
                <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>
            </svg>

            <h2 class="govuk-heading-m govuk-!-margin-top-5">@messages("label.help.title")</h2>
            <div class="contact-form-copy">
                <p class="govuk-body">@messages("copy.form.help")</p>
                <p class="govuk-body">@messages("copy.form.help.dont.include")</p>
            </div>
            <p class="feedback-thankyou hidden">@messages("copy.form.help.thankyou")</p>

            <div id="helpFormWrapper" class="element-hidden govuk-body">
                @partialRetriever.getPartialContent(hmrcHelpWithPageFormUrl)
            </div>
        </div>
    </details>
